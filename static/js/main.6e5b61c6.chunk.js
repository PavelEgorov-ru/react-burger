(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{18:function(e,t,n){e.exports={container:"BurgerConstructor_container__2EZvt",ul:"BurgerConstructor_ul__37ptY",container_btm:"BurgerConstructor_container_btm__3xKek",container_price:"BurgerConstructor_container_price__1LvT3",box:"BurgerConstructor_box__1T7o7",bun:"BurgerConstructor_bun__1aq8G"}},189:function(e,t,n){"use strict";n.r(t);var c,r,i=n(1),a=n.n(i),s=n(23),o=n.n(s),l=n(6),u=n(5),d=n(194),j=n(100),b=n(64),m=n.n(b),x=n(90),_=n.n(x),p=n(91),O=n.n(p),f=n(65),h=n.n(f),g=n(0),v=function(e){var t=e.icon,n=e.children,c=e.classContainer,r=e.classText;return Object(g.jsxs)("a",{href:"#",className:"".concat(h.a.container," + ").concat(c||h.a.logo),children:[t,n&&Object(g.jsx)("p",{className:r,children:n})]})},y=function(){var e=Object(g.jsx)(u.BurgerIcon,{type:"primary"}),t=Object(g.jsx)(u.ProfileIcon,{type:"secondary"}),n=Object(g.jsx)(u.Logo,{}),c=Object(g.jsx)(u.ListIcon,{type:"secondary"});return Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{className:O.a.list,children:[Object(g.jsx)(v,{icon:e,classText:"text text_type_main-default pl-2",classContainer:"p-5 mt-4 mb-4",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(g.jsx)(v,{icon:c,classText:" text text_type_main-default pl-2 text_color_inactive",classContainer:"p-5 mt-4 mb-4 ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(g.jsx)(v,{icon:n}),Object(g.jsx)(v,{icon:t,classText:" text text_type_main-default pl-2  text_color_inactive",classContainer:"p-5 mt-4 mb-4",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})},N=function(){return Object(g.jsx)("header",{className:_.a.header,children:Object(g.jsx)(y,{})})},C=n(13),I=n(66),w=n.n(I),E=n(92),k=n.n(E),M=function(e){var t=e.current,n=e.handleCurrent,c=function(e){n(e)};return Object(g.jsxs)("div",{className:k.a.container,children:[Object(g.jsx)(u.Tab,{value:"\u0431\u0443\u043b\u043a\u0438",active:"\u0431\u0443\u043b\u043a\u0438"===t,onClick:c,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(g.jsx)(u.Tab,{value:"\u0441\u043e\u0443\u0441\u044b",active:"\u0441\u043e\u0443\u0441\u044b"===t,onClick:c,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(g.jsx)(u.Tab,{value:"\u043c\u044f\u0441\u043e",active:"\u043c\u044f\u0441\u043e"===t,onClick:c,children:"\u041c\u044f\u0441\u043e"})]})},B=n(93),R=n.n(B),T=n(8),S=n.n(T),q=(S.a.string.isRequired,S.a.string.isRequired,S.a.string.isRequired,S.a.number.isRequired,S.a.number.isRequired,S.a.number.isRequired,S.a.number.isRequired,S.a.number.isRequired,S.a.string.isRequired,S.a.string.isRequired,S.a.string.isRequired,S.a.number.isRequired,S.a.string,n(32)),D=n.n(q),L=n(195),F=n(27),J=n(31),P=n(17),z=n(33),H=n.n(z),U=n(67),V=n(9),Y=n(94),A=n(95),G=n(102),W=n(101),K=new(function(e){Object(G.a)(n,e);var t=Object(W.a)(n);function n(e){var c,r=e.baseUrl;return Object(Y.a)(this,n),(c=t.call(this,r)).baseUrl=r,c}return Object(A.a)(n,[{key:"_request",value:function(e,t,n){var c={method:e,headers:{"Content-Type":"application/json"}};return fetch("".concat(this.baseUrl,"/").concat(t),n?Object(F.a)(Object(F.a)({},c),{},{body:JSON.stringify(n)}):c).then((function(e){if(e.ok)return e.json();Promise.reject("\u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}))}},{key:"getIdegrients",value:function(){return this._request("GET","ingredients")}},{key:"postOrders",value:function(e){return this._request("POST","orders",e)}}]),n}(a.a.Component))({baseUrl:"https://norma.nomoreparties.space/api"}),Q=n(15),Z=Object(Q.b)("ingredients/fetchIngredients",Object(U.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getIdegrients();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),X=Object(Q.b)("order/fetchOrder",function(){var e=Object(U.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.postOrders(t);case 2:return n=e.sent,e.abrupt("return",n.order);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$=Object(Q.c)({name:"ingredients",initialState:{ingredients:[],isIngredients:!1},extraReducers:(c={},Object(P.a)(c,Z.pending,(function(e){return e})),Object(P.a)(c,Z.fulfilled,(function(e,t){e.ingredients=t.payload,e.isIngredients=!0})),Object(P.a)(c,Z.rejected,(function(e){e.isIngredients=!1})),c)}),ee=Object(Q.c)({name:"order",initialState:{order:{},isOrder:!1},reducers:{closeModal:function(e){e.order={},e.isOrder=!1}},extraReducers:(r={},Object(P.a)(r,X.pending,(function(e,t){console.log(t),e.isOrder=!1})),Object(P.a)(r,X.fulfilled,(function(e,t){e.isOrder=!0,e.order=t.payload})),Object(P.a)(r,X.rejected,(function(e){return e})),r)}),te=Object(Q.c)({name:"elements",initialState:{bun:{},elements:[],isElements:!1},reducers:{postBun:function(e,t){e.bun=t.payload,e.isElements=!0},postElement:{reducer:function(e,t){e.elements=[].concat(Object(J.a)(e.elements),[t.payload])},prepare:function(e){var t=Object(Q.d)();return{payload:Object(F.a)({uid:t},e)}}},deleteElement:function(e,t){e.elements=e.elements.filter((function(e){return e.uid!==t.payload}))},newOrderElements:function(e,t){e.elements=t.payload}}}),ne=Object(Q.c)({name:"ingredient",initialState:{ingredient:{},isOpenModal:!1},reducers:{openModal:function(e,t){e.ingredient=t.payload,e.isOpenModal=!0},closeModal:function(e){e.ingredient={},e.isOpenModal=!1}}}),ce=Object(V.b)({ingredients:$.reducer,elements:te.reducer,ingredient:ne.reducer,order:ee.reducer}),re=function(e){var t=e.item,n=Object(l.c)((function(e){return{bun:e.elements.bun,elements:e.elements.elements}})),c=n.bun,r=n.elements,i=ne.actions,a=Object(l.b)(),s=0;t._id===c._id?s+=1:r.forEach((function(e){return e._id===t._id?s+=1:s}));var o=Object(L.a)({type:t.type,item:t,collect:function(e){return{isDrag:e.isDragging()}}}),d=Object(C.a)(o,2),j=d[0].isDrag,b=d[1],m=j?"0 0 20px #6434db":null;return Object(g.jsxs)("li",{className:D.a.item,onClick:function(){return function(e){a(i.openModal(e))}(t)},draggable:!0,ref:b,style:{boxShadow:m},children:[0!==s&&Object(g.jsx)(u.Counter,{count:s,size:"default"}),Object(g.jsx)("img",{className:"".concat(D.a.image," mb-2"),src:t.image,alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u0438\u043d\u0434\u0438\u0433\u0440\u0435\u043d\u0442\u0430"}),Object(g.jsxs)("div",{className:"".concat(D.a.price," mb-2"),children:[Object(g.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(g.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)("p",{className:"".concat(D.a.description," + text text_type_main-default mb-10"),children:t.name})]})},ie=a.a.forwardRef((function(e,t){var n=e.data,c=e.children;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h2",{className:"text text_type_main-medium pt-10",ref:t,children:c}),Object(g.jsx)("ul",{className:"pr-4 pl-4 pt-6 pb-10 ".concat(R.a.itemContainer),children:n.map((function(e){return Object(g.jsx)(re,{item:e},e._id)}))})]})})),ae=function(){var e=Object(l.c)((function(e){return e.ingredients})),t=e.ingredients,n=a.a.useState("\u0431\u0443\u043b\u043a\u0438"),c=Object(C.a)(n,2),r=c[0],s=c[1],o=Object(i.useRef)(null),u=Object(i.useRef)(null),d=Object(i.useRef)(null),j=Object(i.useMemo)((function(){return t.filter((function(e){return"bun"===e.type}))}),[t]),b=Object(i.useMemo)((function(){return t.filter((function(e){return"sauce"===e.type}))}),[t]),m=Object(i.useMemo)((function(){return t.filter((function(e){return"main"===e.type}))}),[t]);return Object(g.jsxs)("section",{className:w.a.sectionSize,children:[Object(g.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(g.jsx)(M,{current:r,handleCurrent:function(e){s(e),"\u0431\u0443\u043b\u043a\u0438"===e?o.current.scrollIntoView({behavior:"smooth"}):"\u0441\u043e\u0443\u0441\u044b"===e?u.current.scrollIntoView({behavior:"smooth"}):d.current.scrollIntoView({behavior:"smooth"})}}),Object(g.jsxs)("div",{className:w.a.container,onScroll:function(e){var t=e.target.scrollTop,n=u.current.offsetTop,c=d.current.offsetTop;s(t+200>=c?"\u043c\u044f\u0441\u043e":t+200>=n?"\u0441\u043e\u0443\u0441\u044b":"\u0431\u0443\u043b\u043a\u0438")},children:[Object(g.jsx)(ie,{data:j,ref:o,children:" \u0411\u0443\u043b\u043a\u0438 "},1),Object(g.jsx)(ie,{data:b,ref:u,children:" \u0421\u043e\u0443\u0441\u044b "},2),Object(g.jsx)(ie,{data:m,ref:d,children:" \u041c\u044f\u0441\u043e "},3)]})]})},se=n(196),oe=n(18),le=n.n(oe),ue=n(97),de=n.n(ue),je=function(e){var t=e.element,n=e.moveCard,c=e.index,r=te.actions,a=Object(l.b)(),s=Object(i.useRef)(),o=Object(L.a)({type:"element",item:{element:t,index:c}}),d=Object(C.a)(o,2)[1],j=Object(se.a)({accept:"element",hover:function(e){e.index!==c&&s.current&&(n(e.index,c),e.index=c)}});return d((0,Object(C.a)(j,2)[1])(s)),Object(g.jsxs)("li",{className:de.a.li,draggable:!0,ref:s,index:c,children:[Object(g.jsx)(u.DragIcon,{}),Object(g.jsx)(u.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return e=t.uid,void a(r.deleteElement(e));var e}})]})},be=a.a.memo((function(){var e=te.actions,t=Object(l.b)(),n=Object(l.c)((function(e){return{bun:e.elements.bun,elements:e.elements.elements}})),c=n.bun,r=n.elements,i=[c].concat(Object(J.a)(r)),a=i.reduce((function(e,t){return e+t.price}),0),s=function(n,c){var i=Object(J.a)(r),a=i[n];i.splice(n,1),i.splice(c,0,a),t(e.newOrderElements(i))},o=Object(se.a)({accept:"bun",drop:function(n){t(e.postBun(n))}}),d=Object(C.a)(o,2)[1],j=Object(se.a)({accept:["sauce","main"],drop:function(n){t(e.postElement(n))},collect:function(e){return{isHover:e.isOver()}}}),b=Object(C.a)(j,2),m=b[0].isHover,x=b[1],_=m?"0 0 20px #6434db":null;return Object(g.jsxs)("section",{className:"pt-25 + ".concat(le.a.container),children:[Object(g.jsx)("div",{className:le.a.bun,ref:d,children:Object(g.jsx)(u.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(c.name," (\u0432\u0435\u0440\u0445)"),price:c.price,thumbnail:c.image})}),Object(g.jsx)("ul",{className:le.a.ul,ref:x,children:0!==r.length?r.map((function(e,t){return Object(g.jsx)(je,{element:e,moveCard:s,index:t},e.uid)})):Object(g.jsx)("div",{className:le.a.box,style:{boxShadow:_},children:Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0435\u0431\u0435 \u0432\u043a\u0443\u0441\u043d\u0443\u044e \u043d\u0430\u0447\u0438\u043d\u043a\u0443. \u041c\u043e\u0436\u043d\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e"})})}),Object(g.jsx)("div",{className:le.a.bun,children:Object(g.jsx)(u.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(c.name," (\u043d\u0438\u0437)"),price:c.price,thumbnail:c.image})}),Object(g.jsxs)("div",{className:"".concat(le.a.container_btm," + mt-10"),children:[Object(g.jsxs)("div",{className:le.a.container_price,children:[Object(g.jsx)("p",{className:"text text_type_digits-medium mr-2",children:a}),Object(g.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)(u.Button,{type:"primary",size:"medium",onClick:function(){return function(e){var n=e.map((function(e){return e._id}));t(X({ingredients:n}))}(i)},children:" \u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 "})]})]})})),me=be,xe=n(44),_e=n.n(xe),pe=function(){var e=te.actions,t=Object(l.b)(),n=Object(se.a)({accept:"bun",drop:function(n){t(e.postBun(n))},collect:function(e){return{isHover:e.isOver()}}}),c=Object(C.a)(n,2),r=c[0].isHover,i=c[1],a=r?"0 0 20px #6434db":null;return Object(g.jsxs)("div",{className:_e.a.container,ref:i,children:[Object(g.jsx)("div",{className:_e.a.bun_top,style:{boxShadow:a},children:Object(g.jsx)("p",{className:"text text_type_main-default",children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043e\u0447\u043a\u0443, \u0430 \u0437\u0430\u0442\u0435\u043c \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})}),Object(g.jsx)("div",{className:_e.a.bun_bottom,style:{boxShadow:a}})]})},Oe=n(34),fe=n.n(Oe),he=n(98),ge=n.n(he),ve=function(e){var t=e.onClose;return Object(g.jsx)("div",{className:ge.a.container,onClick:t})},ye=document.getElementById("modal-root"),Ne=function(e){var t=e.children,n=e.title,c=e.onClose;return Object(i.useEffect)((function(){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[c]),Object(s.createPortal)(Object(g.jsxs)("div",{className:fe.a.window,children:[Object(g.jsx)(ve,{onClose:c}),Object(g.jsxs)("div",{className:fe.a.container,children:[Object(g.jsx)("h2",{className:"".concat(fe.a.title," text text_type_main-large"),children:n}),Object(g.jsx)("button",{className:fe.a.button,onClick:function(){return c()},children:Object(g.jsx)(u.CloseIcon,{})}),t]})]}),ye)},Ce=n(24),Ie=n.n(Ce),we=function(){var e=Object(l.c)((function(e){return{ingredient:e.ingredient.ingredient}})),t=e.ingredient;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{src:t.image_large,alt:t.name}),Object(g.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:t.name}),Object(g.jsxs)("ul",{className:Ie.a.description,children:[Object(g.jsxs)("li",{className:Ie.a.li,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u0430\u043b\u043b"}),Object(g.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(g.jsxs)("li",{className:Ie.a.li,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(g.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(g.jsxs)("li",{className:Ie.a.li,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(g.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(g.jsxs)("li",{className:Ie.a.li,children:[Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(g.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]})},Ee=n(99),ke=n.n(Ee),Me=n.p+"static/media/check-icon.f3932884.png",Be=function(){var e=Object(l.c)((function(e){return{order:e.order.order}})),t=e.order;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("p",{className:"text text_type_digits-large mt-20",children:[" ",t.number," "]}),Object(g.jsx)("p",{className:"text text_type_main-medium mt-8 mb-15",children:" \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430 "}),Object(g.jsx)("img",{className:ke.a.image,src:Me,alt:"\u0438\u043a\u043e\u043d\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Re=function(){var e=Object(l.c)((function(e){return{isElements:e.elements.isElements,isIngredients:e.ingredients.isIngredients,isOpenModal:e.ingredient.isOpenModal,isOrder:e.order.isOrder}})),t=e.isIngredients,n=e.isElements,c=e.isOpenModal,r=e.isOrder,a=Object(l.b)(),s=ne.actions,o=ee.actions,u=function(){a(c?s.closeModal():o.closeModal())};return Object(i.useEffect)((function(){a(Z())}),[]),Object(g.jsxs)("div",{className:m.a.app,children:[c&&Object(g.jsx)(Ne,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",onClose:u,children:Object(g.jsx)(we,{})}),r&&Object(g.jsx)(Ne,{onClose:u,children:Object(g.jsx)(Be,{})}),Object(g.jsx)(N,{}),t&&Object(g.jsx)(d.a,{backend:j.a,children:Object(g.jsxs)("main",{className:m.a.main,children:[Object(g.jsx)(ae,{}),n?Object(g.jsx)(me,{}):Object(g.jsx)(pe,{})]})})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},Se=n(28),qe=Object(Q.a)({reducer:ce,middleware:function(e){return e().concat(Se.a)},devTools:!1});o.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(l.a,{store:qe,children:Object(g.jsx)(Re,{})})}),document.getElementById("root")),Te()},24:function(e,t,n){e.exports={title:"IngredientDetails_title__3hJNN",description:"IngredientDetails_description__161DW",li:"IngredientDetails_li__26swa"}},32:function(e,t,n){e.exports={item:"Item_item__2yRiY",image:"Item_image__1CRgs",price:"Item_price__3vufW",description:"Item_description__1Vl9J"}},34:function(e,t,n){e.exports={window:"Modal_window__3lUj3",container:"Modal_container__2iEJI",title:"Modal_title__3FG5l",button:"Modal_button__3Z9xY"}},44:function(e,t,n){e.exports={container:"BurgerContainer_container__1Mus7",bun_top_activ:"BurgerContainer_bun_top_activ__21JTB",bun_top:"BurgerContainer_bun_top__CKjWJ",bun_bottom:"BurgerContainer_bun_bottom__1euiQ",bun_activ:"BurgerContainer_bun_activ__2Yuu8"}},64:function(e,t,n){e.exports={app:"App_app__15T-T",main:"App_main__3eCfP"}},65:function(e,t,n){e.exports={container:"MenuElement_container__hCNkd",logo:"MenuElement_logo__20ddm"}},66:function(e,t,n){e.exports={sectionSize:"BurgerIngredients_sectionSize__azd96",container:"BurgerIngredients_container__2_kVw"}},90:function(e,t,n){e.exports={header:"AppHeader_header__i8l0j"}},91:function(e,t,n){e.exports={list:"Menu_list__12waB"}},92:function(e,t,n){e.exports={container:"TabContainer_container__31Qs0"}},93:function(e,t,n){e.exports={itemContainer:"ItemsContainer_itemContainer__2EmRq"}},97:function(e,t,n){e.exports={li:"Element_li__2xuNc"}},98:function(e,t,n){e.exports={container:"ModalOverlay_container__XRk7P"}},99:function(e,t,n){e.exports={image:"OrderDetails_image__14SvO"}}},[[189,1,2]]]);
//# sourceMappingURL=main.6e5b61c6.chunk.js.map